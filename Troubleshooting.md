# Troubleshooting

This is organized as a list of possible messages or signs there is a problem,
followed by any ways that help resolve those problems.

This guide is brand new, and will be added to as new solutions are found for problems.

### When importing an Android project, an error mentions SeekableByteChannel.

Specifically, the error involves `void org.apache.commons.compress.archivers.zip.ZipFile.<init>(java.nio.channels.SeekableByteChannel)'`.
The solution for this is to install the Android Build Tools, version 33.0.2 . I don't know if newer versions work as
well, but you can have 33.0.2 installed in addition to other versions.

To install new build tools, go to Tools -> Android -> SDK Manager, SDK Tools tab, check "Show Package Details" at the
bottom, select Build Tools version 33.0.2, and click Apply or OK. Then follow the installation steps.

### When importing an iOS project, an error mentions SeekableByteChannel.

Like the above error, this involves `void org.apache.commons.compress.archivers.zip.ZipFile.<init>(java.nio.channels.SeekableByteChannel)'`.
This has to do with the placement of the `robovm` plugin, which as of RoboVM 2.3.20 needs to be in `ios/build.gradle`,
not the root `build.gradle`. This is automatically fixed in projects generated by gdx-liftoff 1.12.0.1 and later, but
if you're for any reason using an older version, you can replace the top of `ios/build.gradle` with:
```gradle
buildscript {
  repositories {
    mavenCentral()
  }
  dependencies {
    classpath "com.mobidevelop.robovm:robovm-gradle-plugin:$robovmVersion"
  }
}
apply plugin: 'robovm'

[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'
```
(Starting with the line that sets encoding, everything else is the same.) You will also need to remove any mention of
`robovm` plugin from the top of the root `build.gradle` file; this means a line that starts with `classpath` and a line
`apply plugin: 'robovm'`.

### A project that contains an Android module fails to run, saying `Android Gradle plugin requires Java 17 to run.`

Well, install Java 17 or higher and try again. You may need to set your JDK in your IDE. In IntelliJ IDEA, it's under
`File -> Project Structure`; in that window, you can even download a JDK automatically in the SDKs tab by clicking `+`
and then `Download JDK`. Android Studio doesn't provide as many ways to configure the JDK because it should include one
that works with the latest Android tools already.

### A Kotlin project that contains an Android module gives the message `jvm target compatibility should be set to the same Java version.`

This should be fixed in 1.12.0.1 by using toolchains; if that doesn't work for you, here are other options.

The simplest solution here is to set your JDK to a Java 17 one and to change `sourceCompatibility` and 
`targetCompatibility` to 17 each. A better solution is to use toolchains. In your root build.gradle, you can try adding

```gradle
kotlin {
  jvmToolchain(17)
}
```

(Probably adding it at the bottom of the file makes the most sense.) You still need to change `sourceCompatibility` and
`targetCompatibility` to the same version as your toolchain; these affect Java, while the toolchain should help Kotlin.

### Graal Native Image isn't working (in any of various ways)

First, ensure that you changed `enableGraalNative=false` to `enableGraalNative=true` in gradle.properties. This enables
the rest of the Graal code, including downloading dependencies once you re-sync the project.

On Windows, you also have to make sure a (rather recent) Visual Studio is installed *and has C++ tools installed*. The
C++ tools aren't checked by default when first installing Visual Studio. There may be issues with some non-US locales
when the Native Image tools try to locate Visual Studio programs/scripts. If you encounter these and have a
non-English-language and/or non-US locale, you may want to try [this StackOverflow answer's solution](https://stackoverflow.com/a/77527818).
You can also launch the Visual Studio x64 Native Tools command prompt (it's in the start menu by default), navigate to
your Liftoff project, and launch `gradlew lwjgl3:nativeCompile` from there, which may work better.

The asset-location code was subtly broken in Liftoff 1.12.1.3 in some cases, namely when assets were in subfolders. This
should be fixed in 1.12.1.4; if you are updating a 1.12.1.3 project that uses Graal Native Image, I recommend copying in
the whole nativeimage.gradle file to replace the existing one (unless you have edited it) from either a new 1.12.1.4 or
higher project or [the same file from the generated demo](https://github.com/tommyettinger/gdx-liftoff-demo/blob/main/lwjgl3/nativeimage.gradle).

There are probably a lot of ways Graal projects can have issues that I don't know about yet. There aren't many users for
Graal Native Image in the Java gamedev space right now, but it's a good option for releasing small executables that are
relatively hard to decompile (though not impossible). If more people start using Graal Native Image, this section will
likely grow.
